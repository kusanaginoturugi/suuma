<% content_for :title, "振替伝票一覧 | Summa" %>

<div class="page-shell">
  <div class="hero">
    <p class="eyebrow">DOUBLE-ENTRY</p>
    <h1>振替伝票一覧</h1>
    <p class="sub">保存済みの伝票を確認できます。新規入力は右上のボタンから。</p>
    <div class="pill-row">
      <span class="pill">保存済み <%= @vouchers.size %> 件</span>
      <%= link_to "新規入力", new_voucher_path, class: "pill pill--accent" %>
    </div>
  </div>

  <% if flash[:notice] %>
    <div class="flash flash--notice"><%= flash[:notice] %></div>
  <% end %>
  <% if flash[:alert] %>
    <div class="flash flash--alert"><%= flash[:alert] %></div>
  <% end %>

  <% if @vouchers.empty? %>
    <section class="card">
      <p class="sub">まだ振替伝票がありません。<%= link_to "新規入力", new_voucher_path %> から作成してください。</p>
    </section>
  <% else %>
    <section class="card card--stacked">
      <div class="entry-head">
        <span>起票日</span>
        <span>伝票番号</span>
        <span>摘要</span>
        <span>借方合計</span>
        <span>貸方合計</span>
      </div>
      <div class="entry-list">
        <% @vouchers.each do |voucher| %>
          <div class="entry-row entry-row--list">
            <span><%= voucher.recorded_on&.strftime("%Y-%m-%d") %></span>
            <span><%= voucher.voucher_number %></span>
            <span><%= voucher.description.presence || "—" %></span>
            <span class="text-right"><%= number_with_delimiter(voucher.total_debit) %></span>
            <span class="text-right"><%= number_with_delimiter(voucher.total_credit) %></span>
          </div>
        <% end %>
      </div>
    </section>
  <% end %>
</div>
